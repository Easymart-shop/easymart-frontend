<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>EasyMart</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
<!-- EasyMart Favicon -->
  <link rel="icon" type="image/png" sizes="32x32" href="images/favicon.png">
  <link rel="icon" type="image/png" sizes="16x16" href="images/favicon.png">
  
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: Arial, sans-serif;
      background-color: #f5f5f5;
      padding-top: 180px; /* Navbar + top header + news ticker accommodate */
      padding-bottom: 200px; /* Footer height */
    }

    /* Top Header */
    .top-header { 
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      color: #550202;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      user-select: none;
      line-height: 1.3;
      text-align: center;
      padding: 2px 4px;
      background: transparent;
      z-index: 10000;
    }



    
    .top-header h1 { font-size: 1.8rem; font-weight: 700; margin-bottom: 0; }
    .top-header h5 { font-size: 0.80rem; font-weight: 400; margin: 0; color: #555555; font-style: normal; }

    @media (max-width: 600px) {
      .top-header h1 { font-size: 1.5rem; }
      .top-header h5 { font-size: 0.60rem; }
    }

    /* Navbar */
    .navbar {
      background-color: #fd5e02;
      display: flex;
      flex-direction: column;
      align-items: center;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      z-index: 1000;
      gap: 10px;
      padding:5px;
    }

    body { padding-top: 70px; /* navbar height ‡¶Ö‡¶®‡ßÅ‡¶Ø‡¶æ‡ßü‡ßÄ ‡¶è‡¶°‡¶ú‡¶æ‡¶∏‡ßç‡¶ü */ }

    .hamburger { display: none; font-size: 28px; cursor: pointer; z-index: 10001; }
    .other-menu { display: flex; gap: 10px; z-index: 10001; }

    /* Mobile view */
    @media (max-width: 768px) {
      .other-menu {
        display: none;
        flex-direction: column;
        background: #fd5e02;
        position: absolute;
        top: 60px;
        left: 10px;
        padding: 10px;
        border-radius: 4px;
      }
      .other-menu.open { display: flex; }
      .hamburger { display: block; }
    }

    .navbar .logo img { height: 60px; object-fit: contain; }

    .navbar .menu-right {
      display: flex;
      flex-wrap: wrap;
      gap: 5px;
      justify-content: center;
      width: 100%;
    }

    .navbar .menu-right a {
      text-decoration: none;
      color: rgb(8,0,0);
      font-size: 14px;
      position: relative;
      z-index: 10001;
      padding: 6px 10px;
    }

    .navbar .menu-right a.cart-link {
      display: flex;
      flex-direction: column;
      align-items: center;
      text-decoration: none;
      color: rgb(8,0,0);
      font-size: 14px;
    }

    .cart-icon { font-size: 24px; }
    .cart-text { font-size: 12px; margin-top: 2px; }

    .hamburger { display: none; cursor: pointer; flex-direction: column; align-items: center; font-size: 14px; }
    .hamburger-icon { font-size: 28px; }
    .hamburger-text { font-size: 12px; margin-top: 2px; }

    @media (max-width: 768px) { .hamburger { display: flex; } }

    .navbar .menu-right a:hover { color: #ffcc00; }

    .navbar .search-box {
      margin-top: 10px;
      width: 100%;
      display: flex;
      justify-content: center;
    }

    .navbar .search-box input[type="text"] {
      width: 50%;
      padding: 8px;
      border: none;
      border-radius: 4px;
      background: rgb(246,242,242);
      color: rgb(14,0,0);
    }

    .navbar .search-box button {
      margin-left: 8px;
      padding: 8px 12px;
      border: none;
      background-color: #28a745;
      color: white;
      border-radius: 4px;
      cursor: pointer;
    }

    .navbar .search-box button:hover { background-color: #218838; }

    @media (max-width: 768px) { .navbar .search-box input[type="text"] { width: 80%; } }

    /* Slider */
    .slider { width: 100%; height: 400px; position: relative; overflow: hidden; margin: 10px auto; }
    .slider img.slide { position: absolute; width: 100%; height: 100%; object-fit: cover; opacity: 0; transition: opacity 1s ease-in-out; }
    .slider img.slide.active { opacity: 1; z-index: 1; }
    @media (max-width: 600px) { .slider { height: 400px; } }

    /* Product Section */
    .product-section { padding: 20px; margin-top: 10px; }
    .product-section h2 { margin-bottom: 15px; }

    .products {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(150px,1fr));
      gap: 10px;
      justify-items: center;
    }

    .product {
      background-color: white;
      padding: 5px;
      border-radius: 8px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      text-align: center;
      cursor: pointer;
      width: 100%;
      max-width: 180px;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }

    .product img { width: 100%; height: 120px; object-fit: cover; border-radius: 5px; }
    .product h4 { margin: 5px 0 3px; font-size: 14px; }
    .product p { font-size: 13px; margin: 2px 0; }
    .product button {
      margin-top: 5px;
      padding: 4px 8px;
      background-color: #28a745;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 13px;
    }

    .product button:hover { background-color: #218838; }
    .old-price { text-decoration: line-through; color: #888; margin-right: 6px; }

    .cart-count {
      background: red;
      color: white;
      border-radius: 10px;
      padding: 2px 6px;
      font-size: 12px;
      vertical-align: top;
    }

    /* Footer */
    .top-footer {
      background-color: white;
      color: black;
      padding: 30px 20px;
      box-shadow: 0 -1px 5px rgba(0, 0, 0, 0.1);
      margin-top: 40px;
    }

    .top-footer-content {
      max-width: 1200px;
      margin: 0 auto;
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      justify-content: space-between;
    }

    .footer-logo img { max-width: 130px; height: auto; margin-bottom: 15px; }
    .footer-details { font-size: 14px; line-height: 1.6; }

    @media (max-width: 768px) {
      .top-footer-content { flex-direction: column; text-align: center; }
      .footer-logo { margin-bottom: 10px; }
    }

    footer { background-color: black; color: white; text-align: center; padding: 20px; }

    /* Navbar shrink effect */
    .navbar.shrink {
      flex-direction: row;
      justify-content: space-between;
      padding: 5px 10px;
    }

    .navbar.shrink .logo img { height: 30px; }
    .navbar.shrink .menu-right { flex-direction: row; gap: 8px; font-size: 12px; }
    .navbar.shrink .search-box { margin-top: 0; }

    /* Mobile responsiveness */
    @media (max-width: 768px) {
      .navbar { padding: 8px 5px; }
      .navbar .logo img { height: 45px; }
      .navbar .menu-right a { font-size: 12px; padding: 4px 6px; }
      .navbar .search-box input[type="text"] { width: 60%; padding: 6px; }
      .navbar.shrink .logo img { height: 35px; }
      .navbar.shrink .search-box input[type="text"] { width: 50%; padding: 5px; }
      .navbar.shrink .menu-right a { font-size: 11px; padding: 3px 5px; }
    }

    @media (max-width: 480px) {
      .navbar .search-box input[type="text"] { width: 70%; }
      .navbar.shrink .search-box input[type="text"] { width: 60%; }
      .navbar .menu-right a { font-size: 10px; padding: 2px 4px; }
    }
  </style>
</head>
<body>

  <!-- Navbar -->
  <div class="navbar">
    <div class="logo">
      <img src="https://i.postimg.cc/GmWhGKG6/Whats-App-Image-2025-08-15-at-11-08-52-1fce5f42.jpg" alt="EasyMart Logo">
    </div>

    <div class="menu-right">
      <a href="cart.html" class="cart-link">
        <span class="cart-icon">üõí</span>
        <span class="cart-text">Checkout Cart (<span id="cart-count">0</span>)</span>
      </a>
      <div class="hamburger" id="hamburger">
        <span class="hamburger-icon">‚ò∞</span>
        <span class="hamburger-text">Menu</span>
      </div>
    </div>

    <div class="other-menu" id="otherMenu">
      <a href="account.html">Your Account</a>
      <a href="login.html">Login</a>
      <a href="register.html">Registration</a>
    </div>

    <div class="search-box">
      <input type="text" id="searchInput" placeholder="Search in EasyMart" />
      <button id="searchBtn">Search</button>
    </div>
  </div>

  <!-- Slider -->
  <div class="slider">
    <img class="slide active" src="https://i.postimg.cc/HWBVK2Sb/shopping-food-sale-consumerism-people-concept-happy-couple-weighing-tomatoes-scale-grocery-store-sup.avif" alt="Slide 1" />
    <img class="slide" src="https://i.postimg.cc/jSvgnBvL/young-couple-with-cart-electronics-store-man-woman-buying-home-electrical-appliances-market-266732-2.avif" alt="Slide 2" />
    <img class="slide" src="https://i.postimg.cc/MH6v8Qp1/medicine.jpg" alt="Slide 3" />
    <img class="slide" src="https://i.postimg.cc/J4rjH0F5/7992328fd79a2ce9c8d41ff7fc53984d.webp" alt="Slide 4" />
  </div>

  <!-- Latest Products -->
  <section class="product-section">
    <h2>Latest Products</h2>
    <div class="products" id="product-list-container"></div>
  </section>

  <!-- Footer -->
  <div class="top-footer">
    <div class="top-footer-content">
      <div class="footer-logo">
        <img src="https://i.postimg.cc/853WLQM7/Easymart-logo.jpg" alt="EasyMart Logo">
      </div>
      <div class="footer-details">
        <p><strong>Address:</strong> Naogaon sadar Naogaon, Rajshahi, Bangladesh</p>
        <p><strong>Phone:</strong> +880 1855920606</p>
        <p><strong>Email:</strong> support@easymartsbd.com</p>
        <p><strong>Website:</strong> www.easymartsbd.com</p>
        <p><strong>Founder & CEO:</strong> MD MEHEDI HASAN </p>
        <p><strong>Facebook:</strong> HM MEHEDI</p>
      </div>
    </div>
  </div>

  <footer>
    <p>¬© 2025 EasyMart. All rights reserved.</p>
  </footer>

  <script>
    // Cart data
    let cartData = JSON.parse(localStorage.getItem('cartData')) || [];
    document.getElementById("cart-count").innerText = cartData.reduce((t,i)=>t+i.quantity,0);

    // Slider
    const slides = document.querySelectorAll('.slider img.slide');
    let current = 0;
    if(slides.length>0){
      setInterval(()=>{
        slides[current].classList.remove('active');
        current = (current+1)%slides.length;
        slides[current].classList.add('active');
      },3000);
    }

  // ‚úÖ Dynamic API Base URL (Local vs Live)
  const API_BASE_URL =
    window.location.hostname === "127.0.0.1" || window.location.hostname === "localhost"
      ? "http://localhost:5000"
      : "https://api.easymartsbd.com";

  // ‚úÖ Fetch products from backend
  const container = document.getElementById("product-list-container");

  fetch(`${API_BASE_URL}/api/products`)
    .then(res => {
      if (!res.ok) throw new Error("Failed to fetch products");
      return res.json();
    })
    .then(data => {
      container.innerHTML = "";
      data.forEach(product => {
        const productHTML = `
<div class="product" data-id="${product._id}">
 <a href="product.html?id=${product._id}">

    <img src="${product.image}" alt="${product.name}" />
    <h4>${product.name}</h4>
    <p>
      <span class="old-price">${product.oldPrice ? '‡ß≥' + product.oldPrice : ''}</span>
      ‡ß≥${product.price}
    </p>
    <p class="stock-info" style="font-weight:bold;color:${product.stock > 0 ? 'green' : 'red'};">
      ${product.stock > 0 ? `In Stock (${product.stock})` : 'Out of Stock'}
    </p>
    <p class="sold-info" style="font-weight:bold;color:blue;">
      Sold: ${product.sold || 0}
    </p>
  </a>
  <button class="add-to-cart-btn" type="button" ${product.stock <= 0 ? 'disabled style="opacity:0.6;"' : ''}>Add to Cart</button>
</div>`;
        container.insertAdjacentHTML("beforeend", productHTML);
      });
      addCartButtonListeners();
    })
    .catch(err => {
      console.error("Error fetching products:", err);
      container.innerHTML = "<p style='color:red;'>Failed to load products.</p>";
    });

    // Add to cart
    function addCartButtonListeners() {
      document.querySelectorAll(".add-to-cart-btn").forEach(btn=>{
        btn.addEventListener("click", ()=>{
          const productDiv = btn.closest('.product');
          const name = productDiv.querySelector('h4').innerText;
          const img = productDiv.querySelector('img').src;
          const stockEl = productDiv.querySelector('.stock-info');
          const soldEl = productDiv.querySelector('.sold-info');

          // Price
          const oldPriceEl = productDiv.querySelector('.old-price');
          const priceEl = productDiv.querySelector('p');
          let price;
          if(oldPriceEl && oldPriceEl.innerText){
            const oldPriceLength = oldPriceEl.innerText.replace(/[^\d.]/g,'').length;
            const text = priceEl.innerText.replace(/[^\d.]/g,'');
            price = parseFloat(text.slice(oldPriceLength));
          } else { price = parseFloat(priceEl.innerText.replace(/[^\d.]/g,'')); }

          // Add to cart
          const existing = cartData.find(p=>p.name===name);
          if(existing) existing.quantity+=1;
          else cartData.push({name,price,quantity:1,img});

          localStorage.setItem('cartData', JSON.stringify(cartData));
          document.getElementById("cart-count").innerText = cartData.reduce((t,i)=>t+i.quantity,0);

          // Update stock and sold locally
          let stock = parseInt(stockEl.innerText.replace(/[^\d]/g,'')) - 1;
          let sold = parseInt(soldEl.innerText.replace(/[^\d]/g,'')) + 1;
          stockEl.innerText = stock>0?`In Stock (${stock})`:'Out of Stock';
          soldEl.innerText = `Sold: ${sold}`;

          if(stock<=0) btn.disabled=true;

          alert("Product added to cart!");
        });
      });
    }

    // Search
    document.getElementById("searchInput").addEventListener("input", function(){
      const keyword = this.value.toLowerCase();
      const products = document.querySelectorAll(".product");
      let firstMatch=false;
      products.forEach(product=>{
        const name = product.querySelector("h4").innerText.toLowerCase();
        const isMatch = name.includes(keyword);
        product.style.display=isMatch?"block":"none";
        if(isMatch && !firstMatch){ product.scrollIntoView({behavior:"smooth",block:"center"}); firstMatch=true; }
      });
    });

    // Scroll shrink
    let lastScrollTop = 0;
    const navbar = document.querySelector('.navbar');
    window.addEventListener('scroll', ()=>{
      if(window.scrollY > 50) navbar.classList.add('shrink');
      else navbar.classList.remove('shrink');
    });

    // Hamburger toggle
    const hamburger = document.getElementById("hamburger");
    const otherMenu = document.getElementById("otherMenu");
    hamburger.addEventListener("click", ()=>{ otherMenu.classList.toggle("open"); });
  </script>
</body>
</html>


